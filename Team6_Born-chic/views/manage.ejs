<!DOCTYPE html>
<html>
<head>
    <title>
        Born-chic
    </title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="/javascript/functions.js"></script>
</head>
<body>
<a href="/main" class="nav-link">
    <div class="jumbotron text-center">
        <h1 style="color: dimgrey">Born-chic</h1>
    </div>
</a>
<nav class="navbar navbar-expand-sm navbar-dark bg-dark">
    <a class="navbar-brand" style="color: aliceblue">Menu</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item"><a href="/itemlist/m_outer/1" class="nav-link">남성 아우터</a></li>
            <li class="nav-item"><a href="#" class="nav-link">남성 상의</a></li>
            <li class="nav-item"><a href="#" class="nav-link">남성 하의</a></li>
            <li class="nav-item"><a href="#" class="nav-link">여성 아우터</a></li>
            <li class="nav-item"><a href="#" class="nav-link">여성 상의</a></li>
            <li class="nav-item"><a href="#" class="nav-link">여성 하의</a></li>
        </ul>
        <form class="navbar-form pull-left" role="search" method="post">
            <div class="input-group">
                <input type="text" class="form-control" name="search" placeholder="Search">
                <div class="input-group-btn">
                    <button type="submit" class="btn btn-default">검색</button>
                </div>
            </div>
        </form>
        <% if(user_id == ''){ %>
            <ul class="navbar-nav">
                <li class="nav-item"><a href="/main/login" class="nav-link">Login</a></li>
            </ul>
        <% }else{
        if(admin == '' || admin == 0){ %>
            <ul class="navbar-nav">
                <li class="nav-item "><a class="nav-link" href="/">마이페이지</a></li>
                <li class="nav-item "><a class="nav-link" href="/main/delete_cookie">Logout</a></li>
            </ul>
        <% } else{ %>
            <ul class="navbar-nav">
                <li class="nav-item "><a class="nav-link" href="/manage">물품관리</a></li>
                <li class="nav-item "><a class="nav-link" href="/main/delete_cookie">Logout</a></li>
            </ul>
        <% } %>
        <% } %>
    </div>
</nav>
<br><br>
<table class="table">
    <thead>
    <tr class="table-secondary">
        <th scope="col">구매자</th>
        <th scope="col">상품명</th>
        <th scope="col">카테고리</th>
        <th scope="col">물품 재고, 판매량</th>
        <th scop="col">가격 및 구매량</th>
        <th scope="col">물품 이미지</th>
        <th scope="col">배송 현황</th>
    </tr>
    </thead>
    <tbody>
        <%
        if(rows.length == 0 || rows == null){ %>
            <p style="margin-right: 40px;margin-left: 40px">아직 구매 상품이 없습니다.</p>
        <% } %>

        <% for(var i = 0; i < rows.length; i++){ %>
            <tr>
        <div class="row-cols-lg-3-lg-3">
            <td style="vertical-align: middle">구매자: <%= rows[i].b_id %></td>
            <td style="vertical-align: middle">물품 이름: <%= rows[i].i_name %></td>
            <td style="vertical-align: middle">물품 카테고리: <%= rows[i].category %></td>
            <td style="vertical-align: middle">물품 재고: <%= rows[i].stock %><br>물품 가격: <%= rows[i].price %></td>
            <td style="vertical-align: middle">물품 구매량: <%= rows[i].b_count %></td>
            <td style="vertical-align: middle"><img src="<%= rows[i].image %>" width="100" height="100"></td>
            <% if(rows[i].delivery == 0){ %>
                <td id="delivery" style="vertical-align: middle">배송 준비중
                    <button class="btn btn-dark btn-sm float-right" type="button" style="width: 200px; height: 30px"
                            onclick="buy_check('<%= rows[i].delivery %>', <%= rows[i].idx %>)">배송 중으로 변경
                    </button>
                </td>
            <% }else if(rows[i].delivery == 1){ %>
                <td id="delivery" style="vertical-align: middle">배송 중
                    <button class="btn btn-dark btn-sm float-right" type="button" style="width: 200px; height: 30px"
                            onclick="buy_check('<%= rows[i].delivery %>', <%= rows[i].idx %>)">배송 완료로 변경
                    </button>
                </td>
            <% }else if(rows[i].delivery == 2){ %>
                <td id="delivery" style="vertical-align: middle">배송 완료
                    <button class="btn btn-dark btn-sm float-right" type="button" style="width: 200px; height: 30px"
                            onclick="buy_check('<%= rows[i].delivery %>', <%= rows[i].idx %>)">배송 완료 확정으로 변경
                    </button>
                </td>
        </div></tr></tbody>
    <%}}%>
</table>

<div class="container">
    <div class="card">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs" id="bologna-list" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" href="#m_outer" role="tab" aria-controls="m_outer" aria-selected="true" style="color: black">남성
                        아우터</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#m_tops" role="tab" aria-controls="m_tops" aria-selected="false" style="color: black">남성 상의</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#m_bottoms" role="tab" aria-controls="m_bottoms" aria-selected="false" style="color: black">남성
                        하의</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#w_outer" role="tab" aria-controls="w_outer" aria-selected="false" style="color: black">여성
                        아우터</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#w_tops" role="tab" aria-controls="w_tops" aria-selected="false" style="color: black">여성 상의</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#w_bottoms" role="tab" aria-controls=w_bottoms" aria-selected="false" style="color: black">여성
                        하의</a>
                </li>
            </ul>
        </div>
        <div class="card-body">
            <h4 class="card-title">물품 관리</h4>

            <div class="tab-content mt-3">
                <div class="tab-pane fade show active" id="m_outer" role="tabpanel" aria-labelledby="m_outer-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>

                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'm_outer'){ %>
                            <tr>
                                <th scope="row" style="vertical-align: middle"><%= item[i].i_name %></th>
                                <td style="vertical-align: middle"><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td style="vertical-align: middle"><%= item[i].stock %></td>
                                <td style="vertical-align: middle"><%= item[i].sell %></td>
                                <td style="vertical-align: middle"><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>

                </div>

                <div class="tab-pane fade" id="m_tops" role="tabpanel" aria-labelledby="m_tops-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'm_tops'){ %>
                            <tr>
                                <th scope="row"><%= item[i].i_name %></th>
                                <td><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td><%= item[i].stock %></td>
                                <td><%= item[i].sell %></td>
                                <td><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>
                </div>

                <div class="tab-pane fade" id="m_bottoms" role="tabpanel" aria-labelledby="m_bottoms-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'm_bottoms'){ %>
                            <tr>
                                <th scope="row"><%= item[i].i_name %></th>
                                <td><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td><%= item[i].stock %></td>
                                <td><%= item[i].sell %></td>
                                <td><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>
                </div>

                <div class="tab-pane fade" id="w_outer" role="tabpanel" aria-labelledby="w_outer-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'w_outer'){ %>
                            <tr>
                                <th scope="row"><%= item[i].i_name %></th>
                                <td><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td><%= item[i].stock %></td>
                                <td><%= item[i].sell %></td>
                                <td><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>
                </div>

                <div class="tab-pane fade" id="w_tops" role="tabpanel" aria-labelledby="w_tops-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>
                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'w_tops'){ %>
                            <tr>
                                <th scope="row"><%= item[i].i_name %></th>
                                <td><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td><%= item[i].stock %></td>
                                <td><%= item[i].sell %></td>
                                <td><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>
                </div>

                <div class="tab-pane fade" id="w_bottoms" role="tabpanel" aria-labelledby="w_bottoms-tab">
                    <table class="table">
                        <thead>
                        <tr>
                            <th scope="col">물품 이름</th>
                            <th scope="col">이미지</th>
                            <th scope="col">재고</th>
                            <th scope="col">판매량</th>
                            <th scope="col">가격</th>
                        </tr>
                        </thead>

                        <tbody>
                        <% for(var i = 0; i < item.length; i++){
                        if(item[i].category == 'w_bottoms'){ %>
                            <tr>
                                <th scope="row"><%= item[i].i_name %></th>
                                <td><img src="<%= item[i].image %>" width="50" height="50"></td>
                                <td><%= item[i].stock %></td>
                                <td><%= item[i].sell %></td>
                                <td><%= item[i].price %></td>
                            </tr>
                        <% }} %>
                        </tbody>
                    </table>
                </div>
            </div>
            </tbody>
            </table>
        </div>
    </div>
</div>
<script type="text/javascript">
    $('#bologna-list a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
    })
</script>
</body>
</html>
